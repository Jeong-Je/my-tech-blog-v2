---
title: μ„Έμ… / μΏ ν‚¤ / JWT
date: 2023-09-21
tags:
- WEB
- AuthN
description: μ‚¬μ©μ μΈμ¦μ— ν•„μ”ν• μΏ ν‚¤, μ„Έμ…, JWTμ— λ€ν•΄ μ •λ¦¬ν• ν¬μ¤νΈμ…λ‹λ‹¤.
---

![JWTμΈλ„¤μΌ](/images/thumbnails/jwt.png)

> μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ¥Ό μΈμ¦ν•λ” λ°©μ‹μΌλ΅ λ€ν‘μ μΈ μΏ ν‚¤, μ„Έμ…, JWTκ°€ μμµλ‹λ‹¤.

## HTTP νΉμ„±

HTTP ν”„λ΅ν† μ½μ€ λ‹¤μ νΉμ„±μ„ μ§€λ‹κ³  μμµλ‹λ‹¤.

### - λΉ„μ—°κ²°μ„±(Connectionless)
`λΉ„μ—°κ²°μ„±`μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­μ„ ν• ν›„ μ‘λ‹µμ„ λ°›μΌλ©΄ μ—°κ²°μ„ λμ–΄ λ²„λ¦¬λ” νΉμ„±μ…λ‹λ‹¤.

### - λ¬΄μƒνƒ(Stateless)
`λ¬΄μƒνƒ`λ” μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ΄μ „ μƒνƒλ¥Ό λ³΄μ΅΄ν•μ§€ μ•λ” νΉμ„±μ…λ‹λ‹¤.

HTTPμ μ„ νΉμ„±μΌλ΅ μΈν•΄ μ„λ²„λ” κΈ°λ³Έμ μΌλ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό κΈ°μ–µν•μ§€ μ•μµλ‹λ‹¤.
μΏ ν‚¤μ™€ μ„Έμ…μ„ μ΄μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬λ³„ν•κ³  κΈ°μ–µν•  μ μμµλ‹λ‹¤.


***

## μΏ ν‚¤ (Cookie) π
ν΄λΌμ΄μ–ΈνΈμ— μ €μ¥λλ” `key-value` ν•μ‹μ λ°μ΄ν„°
1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ μ”μ²­
2. μ„λ²„κ°€ μΏ ν‚¤λ¥Ό μƒμ„±ν• ν›„ `Set-Cookie`λ¥Ό μ‘λ‹µ ν—¤λ”μ— λ‹΄μ•„μ„ ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅
3. λ‹¤μ μ”μ²­λ¶€ν„° ν΄λΌμ΄μ–ΈνΈλ” μ”μ²­ ν—¤λ”μ `Set-Cookie`μ— μΏ ν‚¤λ¥Ό λ‹΄μ•„μ„ μ”μ²­
4. μ„λ²„μ—μ„ μΏ ν‚¤ ν™•μΈ

### μΏ ν‚¤μ ν™μ©
- μ‡Όν•‘λ°μ μ¥λ°”κµ¬λ‹ κΈ°λ¥
- μ‚¬μ©μ μ„¤μ • μ €μ¥ (λ‹¤ν¬λ¨λ“)

### μΏ ν‚¤ λ°©μ‹μ λ‹¨μ 
- λ³΄μ•μ— μ·¨μ•½ <small>(λ°μ΄ν„°λ“¤μ„ μ„λ²„κ°€ μ•„λ‹ ν΄λΌμ΄μ–ΈνΈμ— λ³΄κ΄€ν•κ³  μκΈ°μ— μ μ¶ λ° μ΅°μ‘λ  μ„ν—μ΄ ν¬λ‹¤.)</small>
- μΏ ν‚¤μ—λ” μ©λ‰ μ ν•μ΄ μμ–΄ λ§μ€ λ°μ΄ν„°λ¥Ό λ‹΄κΈ° μ–΄λ ¤μ›€. <small>(ν΄λΌμ΄μ–ΈνΈμ— 300κ°κΉμ§€ μΏ ν‚¤ μ €μ¥ κ°€λ¥, 
ν•λ‚μ λ„λ©”μΈλ‹Ή 20κ°μ κ°’λ§ κ°€μ§ μ μμ, ν•λ‚μ μΏ ν‚¤ κ°’μ€ 4KBκΉμ§€ μ €μ¥ κ°€λ¥)</small>
- μΏ ν‚¤μ— μ €μ¥λ λ°μ΄ν„°κ°€ ν΄ μλ΅ λ„¤νΈμ›ν¬ λ¶€ν•κ°€ μ‹¬ν•΄μ§

***

## μ„Έμ… (Session)

μΏ ν‚¤μ λ³΄μ•μƒ λ‹¨μ μ„ λ³΄μ™„ -> `How?` μΏ ν‚¤ κΈ°λ°μ΄μ§€λ§ λ°μ΄ν„°λ¥Ό ν΄λΌμ΄μ–ΈνΈκ°€ μ•„λ‹ `μ„λ²„`μ— μ €μ¥

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ† μ‹ μ„Έμ…IDλ¥Ό λ°κΈ‰ λ°›μ
2. μ„λ²„λ” μ„Έμ…IDμ— ν•΄λ‹Ήν•λ” μ •λ³΄λ¥Ό μ„Έμ… μ €μ¥μ†μ— μ €μ¥ν•΄λ‘ 
3. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ”μ²­ν•  λ•, μΏ ν‚¤μ— μλ” μ„Έμ… IDλ¥Ό κ°™μ΄ λ³΄λƒ„
4. μ„λ²„λ” μ„Έμ… μ €μ¥μ†μ—μ„ ν•΄λ‹Ή μ„Έμ… IDλ¥Ό μ΅°ν ν›„ μ €μ¥λ λ°μ΄ν„°λ¥Ό μ‘λ‹µ μ‹ κ°™μ΄ λ³΄λƒ„

### μ„Έμ…μ ν™μ©
- λ΅κ·ΈμΈ / λ΅κ·Έμ•„μ›ƒ λ“±μ λ³΄μ•μƒ μ¤‘μ”ν• μ‘μ—…

### μ„Έμ… λ°©μ‹μ λ‹¨μ 
- λ°μ΄ν„°λ¥Ό μ„λ²„μ— μ €μ¥ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈκ°€ λ§μ„μλ΅ μ„λ²„ λ©”λ¨λ¦¬λ¥Ό λ§μ΄ μ°¨μ§€ν•¨
- λ§μ€ μμ ν΄λΌμ΄μ–ΈνΈκ°€ λ™μ‹μ— μ”μ²­ν•  κ²½μ° μ„λ²„ κ³Όλ¶€ν™” λ°μƒν•  μ μμ

***

## JWT (Json Web Token)

λ‹¨μ–΄ κ·Έλ€λ΅ JSON ν•μ‹μ μ›Ή ν† ν°μΌλ΅ JWT ν† ν°(Access Token)μ„ HTTP ν—¤λ”μ— μ‹¤μ–΄ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹λ³„ν•λ” λ°©μ‹μ…λ‹λ‹¤.

JWTλ” JSON λ°μ΄ν„°λ¥Ό `Base64Url Encoding` λ°©μ‹μΌλ΅ μΈμ½”λ”©ν•μ—¬ μ κ³µν•©λ‹λ‹¤.
`Base 64 Encoding` μ κ²½μ° β€/β€μ™€ β€+β€μ΄ ν¬ν•¨λμ§€λ§ JWTλ” Urlμ—μ„ νλΌλ―Έν„°λ΅ μ‚¬μ©ν•  μ μλ„λ΅ Url-Safeν• `Base64Url Encoding` λ°©μ‹μ„ μ‚¬μ©ν•¨

### JWT κµ¬μ΅°
![JWTκµ¬μ΅°](/images/post-07/9.22.image1.png)
<cite>https://easyhomputer.tistory.com/41</cite>

`.`μΌλ΅ κµ¬λ¶„ν•μ—¬ μ„Έ κ°€μ§€ μ •λ³΄λ¥Ό μΈμ½”λ”©ν•μ—¬ μ €μ¥

- `Header`μ—λ” JWTμ—μ„ μ‚¬μ©ν•  νƒ€μ…κ³Ό ν•΄μ‹ μ•κ³ λ¦¬μ¦μ μΆ…λ¥κ°€ λ‹΄κ²¨ μκ³ ,

- `Payload`μ—λ” μ‚¬μ©μ μ‹λ³„ μ •λ³΄μ™€ ν† ν° λ§λ£ κΈ°κ°„ λ“±μ΄ λ‹΄κ²¨μμ. ν•΄λ…μ΄ κ°€λ¥ν•λ―€λ΅ μ¤‘μ”ν• μ •λ³΄λ¥Ό λ‹΄λ” κ²ƒμ€
λ³΄μ•μƒ λ¬Έμ λ¥Ό μΌμΌν‚¬ μ μμ.

- `Signature`μ—λ” ν—¤λ”μ™€ νμ΄λ΅λ“λ¥Ό `Base64Url`λ΅ μΈμ½”λ”©ν•μ—¬ λ”ν•κ³ , `Secret Key` μ—­μ‹ ν—¤λ”μ— κΈ°λ΅λμ–΄ μλ”
μ•κ³ λ¦¬μ¦μΌλ΅ ν•΄μ‹ν•μ—¬ κ°’μ„ μ €μ¥

`Signature`ν•„λ“λ΅ μΈν•΄ μ•…μ„± μ μ €κ°€ Payload κ°’μ„ μ΅°μ‘ν•μ—¬ λ³΄λ‚΄λ„ Signature κ°’μ΄ λ‹¤λ¥΄κΈ° λ•λ¬Έμ— μΈμ¦μ„ ν†µκ³Όν•  μ μ—†μµλ‹λ‹¤.
<small>(`Secret Key`λ” ν”ν μ“°μ΄λ” κ°’μ„ μ‚¬μ©ν•λ©΄ μ• λκ³ , λ§¤μ° κΈΈκ³  λ³µμ΅ν• κ°’μ„ μ‚¬μ©ν•λ κΉƒν—™ λ“±μ„ ν†µν•΄μ„ μ™Έλ¶€λ΅ μ μ¶λλ©΄ μ• λ©λ‹λ‹¤.)</small>

### JWT μ‘λ™ λ°©μ‹
μ„Έμ…μ μ„λ²„ λ¶€λ‹΄μ„ μ™„ν™” -> `How?` λ°μ΄ν„°λ¥Ό μ„λ²„μ— μ €μ¥ν•μ§€ μ•μ
1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ μΈμ¦ μ”μ²­
2. μΈμ¦μ΄ μ„±κ³µλλ©΄ ν† ν°μ„ λ°ν–‰ν•μ—¬ μ‘λ‹µ <small>(μ΄ ν† ν°μ€ λ§λ£ μ‹κ°„κ³Ό μ‚¬μ©μλ¥Ό μ‹λ³„ν•  μ •λ³΄ λ“±μ΄ κΈ°λ΅λμ–΄ μμ)</small>
3. ν΄λΌμ΄μ–ΈνΈλ” λ‹¤μ μ”μ²­λ¶€ν„° μ„λ²„μ—κ² μ”μ²­ν•  λ• ν† ν°μ„ κ°™μ΄ λ³΄λƒ„
4. μ„λ²„λ” ν•΄λ‹Ή ν† ν°μ΄ μ ν¨ν• μ§€ ν™•μΈ ν›„ μ‘λ‹µ

ν† ν°μ—λ” μ‚¬μ©μμ λΉ„λ°€λ²νΈ λ“±μ μ¤‘μ”ν• κ°μΈμ •λ³΄λ¥Ό κΈ°λ΅ν•΄λ‘λ©΄ μ•λ©λ‹λ‹¤. μ‚¬μ©μλ¥Ό μ‹λ³„ν•  μ μλ”
μµμ†ν•μ μ •λ³΄λ§ κΈ°λ΅λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.

### JWTμ λ‹¨μ 
- μΏ ν‚¤μ™€ μ„Έμ…κ³Ό λ‹¤λ¥΄κ² `base64` μΈμ½”λ”©μ„ ν†µν•΄μ„ μ •λ³΄λ¥Ό μ κ³µν•λ―€λ΅ μ „λ‹¬λ‰μ΄ λ§μ. <small>(λ§μ€ μμ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν•  κ²½μ° λ„¤νΈμ›ν¬ λ¶€ν•κ°€ λ°μƒν•  μ μμ)</small>
- ν† ν°μ΄ νƒμ·¨λ‹Ήν•  κ²½μ° λ€μ²ν•κΈ° κ³¤λ€(λ¶κ°€λ¥)ν•©λ‹λ‹¤.


***
