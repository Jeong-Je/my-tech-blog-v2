---
title: Next.js13ê³¼ Contentlayerì„ ì´ìš©í•´ì„œ ê°œì¸ ë¸”ë¡œê·¸ êµ¬ì¶•í•  ì¤€ë¹„í•˜ê¸°
date: 2023-08-30
tags:
- Next.js
- WEB
description: Next.js13ê³¼ Contentlayerì„ ì´ìš©í•˜ì—¬ MDXíŒŒì¼ì„ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ì •ë¦¬í•œ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
---

![](/images/thumbnails/nextjs.png)

> Next.js13ê³¼ Contentlayerì„ ì´ìš©í•˜ì—¬ MDXíŒŒì¼ì„ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ì •ë¦¬í•œ í¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
Next.jsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ê°œì¸ ë¸”ë¡œê·¸ëŠ” ì •ì  ì»¨í…ì¸ ì´ê¸°ì— Next.jsì˜ 
[SSG](https://nextjs.org/docs/pages/building-your-application/rendering/static-site-generation)ë¥¼ ì‚¬ìš©í•˜ë©´
í•„ìš”í•œ í˜ì´ì§€ë¥¼ build timeì— ë¯¸ë¦¬ ë§Œë“¤ì–´ì„œ ì¬ì‚¬ìš©í•˜ë¯€ë¡œ í˜ì´ì§€ ë¡œë”©ì†ë„ê°€ ë¹¨ë¼ì§‘ë‹ˆë‹¤. ë˜í•œ Next.jsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ
[SSR](https://nextjs.org/docs/pages/building-your-application/rendering/server-side-rendering) ê¸°ë°˜ì´ë¯€ë¡œ
[SEO](https://nextjs.org/learn/seo/introduction-to-seo)ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.
ë¦¬ì•¡íŠ¸ ê¸°ë°˜ì˜ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ í•„ìš”í• ë•ŒëŠ” ì½”ë“œ ìƒë‹¨ì— `"use client"`ë¥¼ ì¶”ê°€í•˜ì—¬
[CSR](https://nextjs.org/docs/pages/building-your-application/rendering/client-side-rendering)
ë„ ì§€ì›í•˜ë¯€ë¡œ í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬ë¡œ ì„±ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.

***

## ì‹œì‘
Next.jsì—ì„œëŠ” í”„ë¡œì íŠ¸ë¥¼ `create-next-app`ì„ ì´ìš©í•˜ì—¬ ìƒì„±í•  ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒì¼ë“¤ì„ ìë™ìœ¼ë¡œ
ì„¤ì¹˜í•´ì£¼ê¸°ì— ì›¬ë§Œí•´ì„  ì•ˆì“¸ ì´ìœ ê°€ ì—†ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. í„°ë¯¸ë„ ì°½ì— 
```
npx create-next-app
```

ì„ ì…ë ¥í•˜ì—¬ Next.js í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤.
![](/images/post-01/8.30.image1.png)
ê¸°ë³¸ ì„¤ì • ê°’ì„ ë¬¼ì–´ë³´ëŠ”ë° ì €ëŠ” ê¸°ë³¸ ê°’ìœ¼ë¡œ í–ˆìŠµë‹ˆë‹¤. ([tailwindcss](https://tailwindcss.com/)ëŠ” ê°•ì¶”ğŸ‘)

## Contentlayer

Next.js ê³µì‹ë¬¸ì„œì—ì„œëŠ” MDXíŒŒì¼ ë‹¤ë£¨ëŠ” ë²•ìœ¼ë¡œ `next-mdx-remote`ì™€ `contentlayer` ë‘ ê°€ì§€ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.
ì €ëŠ” ê·¸ ì¤‘ì—ì„œ contentlayerë¥¼ íƒí–ˆìŠµë‹ˆë‹¤.

```
npm i contentlayer next-contentlayer
```
Contentlayer ì„¤ì¹˜ê°€ ë‹¤ ë˜ì—ˆìœ¼ë©´ `contentlayer` configë¥¼ `next.config.js`ì— ì¶”ê°€í•´ì¤ë‹ˆë‹¤.
mdx 
```js
// next.config.js
const { withContentlayer } = require('next-contentlayer')

/** @type {import('next').NextConfig} */
const nextConfig = { reactStrictMode: true, swcMinify: true }

module.exports = withContentlayer(nextConfig)
```
ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ì— `contentlayer.config.ts`ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ì•„ë˜ ì½”ë“œë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤.
```js
//contentlayer.config.ts
import { defineDocumentType, makeSource } from "contentlayer/source-files";

const Post = defineDocumentType(() => ({
  name: "Post",
  filePathPattern: `**/*.mdx`,
  contentType: "mdx",
  fields: {
    title: {
      type: "string",
      description: "The title of the post",
      required: true,
    },
    date: {
      type: "date",
      description: "The date of the post",
      required: true,
    },
  },
  computedFields: {
    url: {
      type: "string",
      resolve: (doc) => `/posts/${doc._raw.flattenedPath}`,
    },
  },
}));

export default makeSource({
  contentDirPath: "posts",
  documentTypes: [Post],
});
```
ìœ„ ì½”ë“œëŠ” `Post` documentTypeì„ ë§Œë“¤ì–´ ì£¼ë©°, `flattenedPath`ë¡œ url fieldë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.
document typesì˜ fieldì— tagì™€ description ë“±ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
## MDX íŒŒì¼ ìƒì„± ë° ë Œë”ë§
ì´ì œ MDX íŒŒì¼ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤. í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ì— `posts` í´ë”ë¥¼ ë§Œë“  í›„ ì•ˆì— `test-01.mdx`íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.

```
---
title: "How to create Next.js app"
date: 2023-04-06
---

# NextJsë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°
## h2 íƒœê·¸
### h3 íƒœê·¸
#### h4 íƒœê·¸
```
ë‹¤ìŒìœ¼ë¡œ `npm run dev`ë¡œ ì„œë²„ë¥¼ ì—½ë‹ˆë‹¤. ì½˜ì†”ì°½ì— ì•„ë˜ì™€ ê°™ì´ `.contentlayer` í´ë”ì—
1ê°œì˜ ë¬¸ì„œê°€ ìƒì„±ë˜ì—ˆë‹¤ëŠ” ë¬¸êµ¬ê°€ ë‚˜ì˜¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.

```
- event compiled client and server successfully in 1284 ms (20 modules)
Generated 1 documents in .contentlayer
- wait compiling...
- event compiled client and server successfully in 85 ms (20 modules)
```
![](/images/post-01/8.30.image2.png)

ìœ„ì™€ ê°™ì´ `.contentlayer` í´ë”ì— ì œê°€ ë§Œë“  `test-01.mdx`íŒŒì¼ì´ json í˜•íƒœë¡œ ì €ì¥ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í¬ìŠ¤íŠ¸ì˜ ì‘ì„± ë‚ ì§œë¥¼ formatí•˜ê¸° ìœ„í•´ `date-fns`ë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.
```
npm i date-fns
```
ê·¸ë¦¬ê³  tsconfig.json íŒŒì¼ì— ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ generated filesì„  `.contentlayer` í´ë”ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ 
ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
```js
"paths": {
  "@/*": ["./*"],
  "contentlayer/generated": ["./.contentlayer/generated"]
}
```

ì´ì œ `app`í´ë”ì•ˆì— `posts`í´ë”ì™€ ê·¸ ì•ˆì— `slug`í´ë”ë¥¼ ë§Œë“  í›„ slugí´ë” ì•ˆì— `page.tsx`ë¥¼ ìƒì„±í•˜ì—¬ 
ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

```js
// app/posts/[slug]/page.tsx

import { allPosts } from "contentlayer/generated";
import { getMDXComponent } from "next-contentlayer/hooks";
import { format, parseISO } from "date-fns";

export const generateStaticParams = async () =>
  allPosts.map((post:any) => ({ slug: post._raw.flattenedPath }));

export const generateMetadata = ({ params }: any) => {
  const post = allPosts.find(
    (post: any) => post._raw.flattenedPath === params.slug: any
  );
  return { title: post?.title, description: post?.description };
};

const PostLayout = ({ params }: { params: { slug: string } }) => {
  const post = allPosts.find((post) => post._raw.flattenedPath === params.slug);

  let MDXContent;

  if (!post) {
    return <div>404</div>;
  } else {
    MDXContent = getMDXComponent(post!.body.code);
  }

  return (
    <div>
      <h1>{post.title}</h1>
      <p>{format(parseISO(post.date), "LLLL d, yyyy")}</p>
      <article>
        <MDXContent />
      </article>
    </div>
  );
};

export default PostLayout;
```

ìœ„ ì½”ë“œëŠ” í¬ìŠ¤íŠ¸ í˜ì´ì§€ë¥¼ `slug parameter`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë Œë”ë§ ì‹œì¼œì¤ë‹ˆë‹¤. ìì„¸í•œ ë°©ì‹ì€ Next.Js ê³µì‹ë¬¸ì„œì˜
[ë™ì  ë¼ìš°íŠ¸](https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes) ë¶€ë¶„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì½”ë“œ ì‘ì„±ì„ ë§ˆì¹œ í›„ `http://localhost:3000/posts/test-01`ë¡œ ì ‘ì†í•˜ë©´
ë§Œë“¤ì—ˆë˜ mdxíŒŒì¼ì„ ê°€ì§€ê³  ì˜ ë Œë”ë§ëœ í™”ë©´ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
![](/images/post-01/8.30.image3.png)
## ìŠ¤íƒ€ì¼ë§
ê·¸ëŸ°ë° ë¶„ëª… mdx íƒœê·¸ì—ëŠ” `#`ì„ ì´ìš©í•´ì„œ h1~h4 íƒœê·¸ë¥¼ ë§Œë“¤ì—ˆëŠ”ë° ë Œë”ë§ëœ í™”ë©´ì—ì„œëŠ” ì ìš©ì´ ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.
`global.css`íŒŒì¼ì— ê°€ì„œ ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•´ì£¼ë©´

```css
article h1 {
  font-size: 2em;
}
article h2 {
  font-size: 1.5em;
}
article h3 {
  font-size: 1.17em;
}
article h4 {
  font-size: 1em;
}
```

![](/images/post-01/8.30.image4.png)
ìœ„ì™€ ê°™ì´ íƒœê·¸ê°€ ì ìš©ëœ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ëŸ° ì‹ìœ¼ë¡œ ëª¨ë“  íƒœê·¸ë¥¼ ìŠ¤íƒ€ì¼ë§ ì§ì ‘ í•˜ê¸°ì—ëŠ” ë„ˆë¬´ ë²ˆê±°ë¡œìš°ê¸°ì— 
ë§ì´ë“¤ `tailwindcss`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```
npm i -D @tailwindcss/typography
```

`@tailwindcss/typography` í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ê³  `tailwindcss.config.ts` í´ë”ì˜ `plugins`ì— ì•„ë˜ ì½”ë“œë¥¼
ì¶”ê°€í•´ì¤ë‹ˆë‹¤
```js
  plugins: [
    require('@tailwindcss/typography'),
  ],
```

`global.css`íŒŒì¼ì— ê°€ì…”ì„œ ìƒë‹¨ì— ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.<small>(Next.js CLIë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ë•Œ tailwindcssë¥¼ ê¸°ë³¸ ì˜µì…˜ìœ¼ë¡œ ì„¤ì •í•˜ì…¨ìœ¼ë©´ ìë™ìœ¼ë¡œ ì¶”ê°€ë˜ì–´ ìˆìŠµë‹ˆë‹¤. )</small>
```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

ê·¸ë¦¬ê³  `app/posts/[slug]/page.tsx` íŒŒì¼ì— ariticle íƒœê·¸ì— `prose`ë¥¼ classNameìœ¼ë¡œ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.
![](/images/post-01/8.30.image5.png)

íƒœê·¸ ìŠ¤íƒ€ì¼ì´ ìë™ìœ¼ë¡œ ì˜ ì ìš©ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `prose`ë¡œ ì ìš©ëœ ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•˜ì‹œê³  ì‹¶ìœ¼ì‹œë©´
[tailwindcss ê³µì‹ ë¬¸ì„œ](https://tailwindcss.com/docs/typography-plugin)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¶”ê°€ì ìœ¼ë¡œ í¬ìŠ¤íŠ¸ì•ˆì— í¬í•¨ë˜ì–´ìˆëŠ” ì†ŒìŠ¤ì½”ë“œë¥¼ ìŠ¤íƒ€ì¼ë§ í•˜ì‹œê³  ì‹¶ìœ¼ì‹œë©´
[rehype-pretty-code](https://rehype-pretty-code.netlify.app/)ë¥¼ ì´ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.


